package public

import (
	"encoding/json"
	"fmt"
	"testing"

	"serve/comm/mq"
	"serve/comm/slotsmongo"
)

func TestXxx(t *testing.T) {
	//
	//mq.ConnectServerMust("127.0.0.1:11002")
	//
	//AddBetLog(&slotsmongo.AddBetLogParams{
	//	Pid:         100050,
	//	Bet:         10000,
	//	Win:         0,
	//	Balance:     10000,
	//	RoundID:     "test round",
	//	ServiceName: "bala",
	//	AppID:       "faketrans",
	//	Uid:         "testuser1",
	//})
	fmt.Println(float64(674000000) / float64(120000000) * 100)
}

func TestAddBetLog2(t *testing.T) {
	count := 0
	for {
		if count == 15 {
			break
		}
		mq.ConnectServerMust("192.168.1.107:11002")
		var allGames []slotsmongo.AppStore
		bytes := []byte("[\n  {\n    \"gameId\": \"pg_3\",\n    \"reward_percent\": -13,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_20\",\n    \"reward_percent\": -74,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_24\",\n    \"reward_percent\": -2,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_25\",\n    \"reward_percent\": -58,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_29\",\n    \"reward_percent\": -64,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_33\",\n    \"reward_percent\": -46,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_34\",\n    \"reward_percent\": -40,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_35\",\n    \"reward_percent\": -157,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_36\",\n    \"reward_percent\": -37,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_37\",\n    \"reward_percent\": -55,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_38\",\n    \"reward_percent\": -65,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_39\",\n    \"reward_percent\": -2,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_40\",\n    \"reward_percent\": -67,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_42\",\n    \"reward_percent\": -61,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_44\",\n    \"reward_percent\": -84,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_48\",\n    \"reward_percent\": -70,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_50\",\n    \"reward_percent\": -69,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_53\",\n    \"reward_percent\": -115,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_54\",\n    \"reward_percent\": -67,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_57\",\n    \"reward_percent\": -77,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_58\",\n    \"reward_percent\": -75,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_59\",\n    \"reward_percent\": -76,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_60\",\n    \"reward_percent\": -65,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_61\",\n    \"reward_percent\": -74,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_62\",\n    \"reward_percent\": -67,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_63\",\n    \"reward_percent\": -41,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_64\",\n    \"reward_percent\": -57,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_65\",\n    \"reward_percent\": 1,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_68\",\n    \"reward_percent\": -55,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_69\",\n    \"reward_percent\": -27,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_70\",\n    \"reward_percent\": -49,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_74\",\n    \"reward_percent\": 0,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_75\",\n    \"reward_percent\": -1,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_79\",\n    \"reward_percent\": -72,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_82\",\n    \"reward_percent\": -64,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_83\",\n    \"reward_percent\": -71,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_86\",\n    \"reward_percent\": -113,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_87\",\n    \"reward_percent\": 1,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_88\",\n    \"reward_percent\": -82,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_89\",\n    \"reward_percent\": -1,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_91\",\n    \"reward_percent\": -95,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_92\",\n    \"reward_percent\": -71,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_93\",\n    \"reward_percent\": -63,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_94\",\n    \"reward_percent\": -69,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_95\",\n    \"reward_percent\": -77,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_97\",\n    \"reward_percent\": -67,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_98\",\n    \"reward_percent\": -70,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_100\",\n    \"reward_percent\": -54,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_101\",\n    \"reward_percent\": -70,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_102\",\n    \"reward_percent\": -91,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_103\",\n    \"reward_percent\": -71,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_104\",\n    \"reward_percent\": 1,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_105\",\n    \"reward_percent\": -71,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_106\",\n    \"reward_percent\": 0,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_107\",\n    \"reward_percent\": -73,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_108\",\n    \"reward_percent\": -54,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_110\",\n    \"reward_percent\": -75,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_112\",\n    \"reward_percent\": -59,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_113\",\n    \"reward_percent\": -73,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_114\",\n    \"reward_percent\": -83,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_115\",\n    \"reward_percent\": -67,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_117\",\n    \"reward_percent\": -70,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_118\",\n    \"reward_percent\": -65,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_119\",\n    \"reward_percent\": -83,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_120\",\n    \"reward_percent\": -58,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_121\",\n    \"reward_percent\": -52,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_122\",\n    \"reward_percent\": -77,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_123\",\n    \"reward_percent\": -70,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_124\",\n    \"reward_percent\": -95,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_125\",\n    \"reward_percent\": -78,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_126\",\n    \"reward_percent\": 0,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_127\",\n    \"reward_percent\": -62,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_128\",\n    \"reward_percent\": -71,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_129\",\n    \"reward_percent\": -76,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_130\",\n    \"reward_percent\": -76,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_132\",\n    \"reward_percent\": -61,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_135\",\n    \"reward_percent\": -1,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1312883\",\n    \"reward_percent\": -66,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1338274\",\n    \"reward_percent\": -75,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1340277\",\n    \"reward_percent\": -85,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1368367\",\n    \"reward_percent\": -78,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1372643\",\n    \"reward_percent\": -68,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1381200\",\n    \"reward_percent\": -82,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1397455\",\n    \"reward_percent\": -95,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1402846\",\n    \"reward_percent\": -86,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1418544\",\n    \"reward_percent\": -112,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1420892\",\n    \"reward_percent\": -120,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1432733\",\n    \"reward_percent\": -107,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1448762\",\n    \"reward_percent\": -96,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1451122\",\n    \"reward_percent\": -113,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1473388\",\n    \"reward_percent\": -79,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1489936\",\n    \"reward_percent\": -1,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1492288\",\n    \"reward_percent\": -82,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1508783\",\n    \"reward_percent\": -95,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1513328\",\n    \"reward_percent\": -84,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1529867\",\n    \"reward_percent\": -79,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1543462\",\n    \"reward_percent\": -84,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1555350\",\n    \"reward_percent\": -72,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1568554\",\n    \"reward_percent\": -91,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1572362\",\n    \"reward_percent\": -71,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1580541\",\n    \"reward_percent\": -116,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1594259\",\n    \"reward_percent\": -88,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1601012\",\n    \"reward_percent\": -93,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1615454\",\n    \"reward_percent\": -73,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1623475\",\n    \"reward_percent\": -95,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1635221\",\n    \"reward_percent\": -92,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1648578\",\n    \"reward_percent\": -72,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1655268\",\n    \"reward_percent\": -83,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1671262\",\n    \"reward_percent\": 1,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1682240\",\n    \"reward_percent\": -66,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1695365\",\n    \"reward_percent\": 1,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  },\n  {\n    \"gameId\": \"pg_1717688\",\n    \"reward_percent\": -77,\n    \"no_award_percent\": 200,\n    \"gamePatten\": 1\n  }\n]")
		err := json.Unmarshal(bytes, &allGames)
		if err != nil {
			fmt.Println(err)
			return
		}
		for i := range allGames {
			fmt.Println(allGames[i])
			allGames[i].AppId = "faketrans"
			mq.PublishMsg(fmt.Sprintf("/store/setInfo_%s", allGames[i].GameId), allGames[i])
		}
		count++
	}

}
